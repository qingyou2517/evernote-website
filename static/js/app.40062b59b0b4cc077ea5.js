webpackJsonp([5],{"8aV+":function(t,e){},Jdfc:function(t,e){t.exports={baseURL:"//note-server.hunger-valley.com"}},MX4V:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),r=n("zL8q"),a=n.n(r),s=(n("tvR6"),n("Dd8w")),i=n.n(s),c=n("NYxO"),u={data:function(){return{}},created:function(){this.setUser()},methods:i()({},Object(c.b)({setUser:"checkLogin"})),computed:i()({},Object(c.c)(["username","slug"]),{slug:function(){return this.username.charAt(0)}})},d={render:function(){var t=this.$createElement;return(this._self._c||t)("span",{attrs:{title:this.username}},[this._v(this._s(this.slug))])},staticRenderFns:[]};var l=n("VU/8")(u,d,!1,function(t){n("PXUT")},"data-v-499384b6",null).exports,f=n("//Fk"),h=n.n(f),v=n("mtWM"),m=n.n(v),p=n("Jdfc"),b=n.n(p);function g(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new h.a(function(o,a){var s={url:t,method:e,validateStatus:function(t){return t>=200&&t<300||400===t}};"get"===e.toLowerCase()?s.params=n:s.data=n,m()(s).then(function(t){200===t.status?o(t.data):(Object(r.Message)({type:"error",message:t.data.msg}),a(t.data))}).catch(function(t){Object(r.Message)({type:"error",message:"网络异常"}),a({msg:"网络异常"})})})}m.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",m.a.defaults.baseURL=b.a.baseURL,m.a.defaults.withCredentials=!0;var k="/auth/register",N="/auth/login",I="/auth/logout",T="/auth",E=function(t){var e=t.username,n=t.password;return g(k,"POST",{username:e,password:n})},A=function(t){var e=t.username,n=t.password;return g(N,"POST",{username:e,password:n})},y=function(){return g(I)},w=function(){return g(T)},_={components:{avatar:l},data:function(){return{}},methods:i()({},Object(c.b)(["logout"]),{onLogout:function(){this.logout({path:"/login"})}})},M={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"sidebar"}},[e("avatar"),this._v(" "),e("div",{staticClass:"icons"},[e("router-link",{attrs:{to:"/note",title:"笔记"}},[e("svg",{staticClass:"icon"},[e("use",{attrs:{"xlink:href":"#icon-note"}})])]),this._v(" "),e("router-link",{attrs:{to:"/notebooks",title:"笔记本"}},[e("svg",{staticClass:"icon"},[e("use",{attrs:{"xlink:href":"#icon-notebook"}})])]),this._v(" "),e("router-link",{attrs:{to:"/trash",title:"回收站"}},[e("svg",{staticClass:"icon"},[e("use",{attrs:{"xlink:href":"#icon-trash"}})])])],1),this._v(" "),e("div",{staticClass:"logout",on:{click:this.onLogout}},[e("svg",{staticClass:"icon"},[e("use",{attrs:{"xlink:href":"#icon-logout"}})])])],1)},staticRenderFns:[]};var L={name:"app",components:{sidebar:n("VU/8")(_,M,!1,function(t){n("MX4V")},"data-v-4aa3bd70",null).exports}},C={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("sidebar"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var D=n("VU/8")(L,C,!1,function(t){n("8aV+")},null,null).exports,V=n("/ocq");o.default.use(V.a);var z=new V.a({routes:[{path:"/",alias:"/notebooks",component:function(){return n.e(3).then(n.bind(null,"C3fl"))}},{path:"/login",component:function(){return n.e(2).then(n.bind(null,"xJsL"))}},{path:"/note",component:function(){return n.e(0).then(n.bind(null,"Gb2o"))}},{path:"/trash",component:function(){return n.e(1).then(n.bind(null,"WMg/"))}}]}),H=(n("bdgc"),n("pFYg")),x=n.n(H);function U(t){var e=("object"===(void 0===t?"undefined":x()(t))?t:new Date(t)).getTime(),n=Date.now()-e,o="";switch(!0){case n<6e4:o="刚刚";break;case n<36e5:o=Math.floor(n/6e4)+"分钟前";break;case n<864e5:o=Math.floor(n/36e5)+"小时前";break;default:o=Math.floor(n/864e5)+"天前"}return o}var B={GET:"/notebooks",ADD:"/notebooks",UPDATE:"/notebooks/:id",DELETE:"/notebooks/:id"},F=function(){return new h.a(function(t,e){g(B.GET).then(function(e){e.data=e.data.sort(function(t,e){return t.createAt<e.createAt?1:-1}),e.data.forEach(function(t){t.createdAtFriendly=U(t.createdAt),t.updatedAtFriendly=U(t.updatedAt)}),t(e)}).catch(function(t){e(t)})})},O=function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{title:""}).title,n=void 0===e?"":e;return g(B.UPDATE.replace(":id",t),"PATCH",{title:n})},P=function(t){return g(B.DELETE.replace(":id",t),"DELETE")},R=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:""}).title,e=void 0===t?"":t;return new h.a(function(t,n){g(B.ADD,"POST",{title:e}).then(function(e){e.data.createdAtFriendly=U(e.data.createdAt),e.data.updatedAtFriendly=U(e.data.updatedAt),t(e)}).catch(function(t){n(t)})})},j={state:{notebooks:null,currentBookId:null},getters:{notebooks:function(t){return t.notebooks||[]},currentBook:function(t){return Array.isArray(t.notebooks)?t.currentBookId?t.notebooks.find(function(e){return e.id==t.currentBookId})||{}:t.notebooks[0]||{}:{}}},mutations:{setNotebooks:function(t,e){t.notebooks=e.notebooks},addNotebook:function(t,e){t.notebooks.unshift(e.notebook)},updateNotebook:function(t,e){(t.notebooks.find(function(t){return t.id==e.notebookId})||{}).title=e.title},deleteNotebook:function(t,e){t.notebooks=t.notebooks.filter(function(t){return t.id!=e.notebookId})},setCurrentBookId:function(t,e){t.currentBookId=e.currentBookId}},actions:{getNotebooks:function(t){var e=t.commit;return null!==t.state.notebooks?h.a.resolve():F().then(function(t){e("setNotebooks",{notebooks:t.data})})},addNotebook:function(t,e){var n=t.commit;return R({title:e.title}).then(function(t){n("addNotebook",{notebook:t.data}),r.Message.success(t.msg)})},updateNotebook:function(t,e){var n=t.commit;return O(e.notebookId,{title:e.title}).then(function(t){n("updateNotebook",{notebookId:e.notebookId,title:e.title}),r.Message.success(t.msg)})},deleteNotebook:function(t,e){var n=t.commit;return P(e.notebookId).then(function(t){n("deleteNotebook",{notebookId:e.notebookId}),r.Message.success(t.msg)})}}},S={GET:"/notes/from/:notebookId",ADD:"/notes/to/:notebookId",UPDATE:"/notes/:noteId",DELETE:"/notes/:noteId"},G=function(t){var e=t.notebookId;return new h.a(function(t,n){g(S.GET.replace(":notebookId",e)).then(function(e){e.data=e.data.map(function(t){return t.createdAtFriendly=U(t.createdAt),t.updatedAtFriendly=U(t.updatedAt),t}).sort(function(t,e){return t.updatedAt<e.updatedAt?1:-1}),t(e)}).catch(function(t){n(t)})})},J=function(t,e){var n=t.noteId,o=e.title,r=e.content;return g(S.UPDATE.replace(":noteId",n),"PATCH",{title:o,content:r})},X=function(t){var e=t.noteId;return g(S.DELETE.replace(":noteId",e),"DELETE")},W=function(t){var e=t.notebookId,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{title:"",content:""},o=n.title,r=void 0===o?"":o,a=n.content,s=void 0===a?"":a;return new h.a(function(t,n){g(S.ADD.replace(":notebookId",e),"POST",{title:r,content:s}).then(function(e){e.data.createdAtFriendly=U(e.data.createdAt),e.data.updatedAtFriendly=U(e.data.updatedAt),t(e)}).catch(function(t){n(t)})})},$={state:{notes:null,currentNoteId:null},getters:{notes:function(t){return t.notes},currentNote:function(t){return Array.isArray(t.notes)?t.currentNoteId?t.notes.find(function(e){return e.id==t.currentNoteId})||{title:"",content:""}:t.notes[0]||{title:"",content:""}:{title:"",content:""}}},mutations:{setNote:function(t,e){t.notes=e.notes},addNote:function(t,e){t.notes.unshift(e.note)},updateNote:function(t,e){var n=t.notes.find(function(t){return t.id===e.noteId})||{};n.title=e.title,n.content=e.content},deleteNote:function(t,e){t.notes=t.notes.filter(function(t){return t.id!==e.noteId})},setCurrentNoteId:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.currentNoteId=e.currentNoteId}},actions:{getNotes:function(t,e){var n=t.commit,o=e.notebookId;return G({notebookId:o}).then(function(t){n("setNote",{notes:t.data})})},addNote:function(t,e){var n=t.commit,o=e.notebookId,r=e.title,a=e.content;return W({notebookId:o},{title:r,content:a}).then(function(t){n("addNote",{note:t.data})})},updateNote:function(t,e){var n=t.commit,o=e.noteId,r=e.title,a=e.content;return J({noteId:o},{title:r,content:a}).then(function(t){n("updateNote",{noteId:o,title:r,content:a})})},deleteNote:function(t,e){var n=t.commit,o=e.noteId;return X({noteId:o}).then(function(t){n("deleteNote",{noteId:o}),r.Message.success(t.msg)})}}},q={GET:"/notes/trash",REVERT:"/notes/:noteId/revert",DELETE:"/notes/:noteId/confirm"},Y=function(){return new h.a(function(t,e){g(q.GET).then(function(e){e.data=e.data.sort(function(t,e){return t.createdAt<e.createdAt?1:-1}),e.data.forEach(function(t){t.createdAtFriendly=U(t.createdAt),t.updatedAtFriendly=U(t.updatedAt)}),t(e)}).catch(function(t){e(t)})})},Z=function(t){var e=t.noteId;return g(q.DELETE.replace(":noteId",e),"DELETE")},K=function(t){var e=t.noteId;return g(q.REVERT.replace(":noteId",e),"PATCH")},Q={state:{trashNotes:null,curTrashNoteId:null},getters:{trashNotes:function(t){return t.trashNotes||[]},curTrashNote:function(t,e){return t.curTrashNoteId?t.trashNotes.find(function(e){return e.id==t.curTrashNoteId})||{}:e.trashNotes[0]||{}},belongTo:function(t,e,n,o){return(o.notebooks.find(function(t){return t.id==e.curTrashNote.notebookId})||{}).title||""}},mutations:{setTrashNotes:function(t,e){t.trashNotes=e.trashNotes},addTrashNote:function(t,e){t.trashNotes.unshift(e.note)},deleteTrashNote:function(t,e){t.trashNotes=t.trashNotes.filter(function(t){return t.id!=e.noteId})},setCurTrashNote:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.curTrashNoteId=e.curTrashNoteId}},actions:{getTrashNotes:function(t){var e=t.commit;return Y().then(function(t){e("setTrashNotes",{trashNotes:t.data})})},deleteTrashNote:function(t,e){var n=t.commit,o=e.noteId;return Z({noteId:o}).then(function(t){n("deleteTrashNote",{noteId:o}),r.Message.success(t.msg)})},revertTrashNote:function(t,e){var n=t.commit,o=e.noteId;return K({noteId:o}).then(function(t){n("deleteTrashNote",{noteId:o}),r.Message.success(t.msg)})}}},tt={state:{user:null},getters:{username:function(t){return null===t.user?"未登录":t.user.username},slug:function(t){return null===t.user?"未":t.user.username.charAt(0)}},mutations:{setUser:function(t,e){t.user=e.user}},actions:{login:function(t,e){var n=t.commit,o=e.username,r=e.password;return A({username:o,password:r}).then(function(t){n("setUser",{user:t.data})})},register:function(t,e){var n=t.commit,o=e.username,r=e.password;return E({username:o,password:r}).then(function(t){n("setUser",{user:t.data})})},logout:function(t){var e=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{path:"/login"};return y().then(function(t){e("setUser",{user:null}),z.push(n).catch(function(t){})})},checkLogin:function(t,e){var n=t.commit;return w().then(function(t){t.isLogin?n("setUser",{user:t.data}):z.push(e).catch(function(t){})})}}};o.default.use(c.a);var et=new c.a.Store({modules:{notebook:j,note:$,trash:Q,user:tt}});o.default.use(a.a),o.default.config.productionTip=!1,new o.default({el:"#app",router:z,store:et,components:{App:D},template:"<App/>"})},PXUT:function(t,e){},bdgc:function(t,e){window._iconfont_svg_string_3696817='<svg><symbol id="icon-fullscreen" viewBox="0 0 1024 1024"><path d="M285.866667 810.666667H384v42.666666H213.333333v-170.666666h42.666667v98.133333l128-128 29.866667 29.866667-128 128z m494.933333 0l-128-128 29.866667-29.866667 128 128V682.666667h42.666666v170.666666h-170.666666v-42.666666h98.133333zM285.866667 256l128 128-29.866667 29.866667-128-128V384H213.333333V213.333333h170.666667v42.666667H285.866667z m494.933333 0H682.666667V213.333333h170.666666v170.666667h-42.666666V285.866667l-128 128-29.866667-29.866667 128-128z" fill="#444444" ></path></symbol><symbol id="icon-down" viewBox="0 0 1024 1024"><path d="M512.726547 675.318646c-8.063653 0-15.790638-3.245927-21.435195-9.006118L231.175103 400.906809c-11.603269-11.837606-11.410887-30.840402 0.427742-42.442648 11.837606-11.601222 30.841426-11.410887 42.442648 0.427742l238.681054 243.534596L751.407602 358.891903c11.601222-11.839653 30.602995-12.033058 42.442648-0.427742 11.839653 11.603269 12.031011 30.605042 0.427742 42.442648L534.161742 666.312528C528.517185 672.072719 520.791224 675.318646 512.726547 675.318646z"  ></path></symbol><symbol id="icon-add" viewBox="0 0 1024 1024"><path d="M512 938.666667C276.362667 938.666667 85.333333 747.637333 85.333333 512S276.362667 85.333333 512 85.333333s426.666667 191.029333 426.666667 426.666667-191.029333 426.666667-426.666667 426.666667z m0-64c200.298667 0 362.666667-162.368 362.666667-362.666667S712.298667 149.333333 512 149.333333 149.333333 311.701333 149.333333 512s162.368 362.666667 362.666667 362.666667z m32-394.666667h128a32 32 0 0 1 0 64H544v128a32 32 0 0 1-64 0V544H352a32 32 0 0 1 0-64h128V352a32 32 0 0 1 64 0v128z"  ></path></symbol><symbol id="icon-note" viewBox="0 0 1024 1024"><path d="M978.1 281.5v566.8c0 71.6-58.3 129.9-129.9 129.9H175.8c-71.6 0-129.9-58.3-129.9-129.9V175.8c0-71.6 58.3-129.9 129.9-129.9h543.8V0H175.8C78.8 0 0 78.8 0 175.8v672.5C0 945.2 78.8 1024 175.8 1024h672.5c96.9 0 175.8-78.8 175.8-175.8V281.5h-46z"  ></path><path d="M433.7 590.3c8.9 8.9 23.5 8.9 32.4 0l551.2-551.2c8.9-8.9 8.9-23.5 0-32.4-8.9-8.9-23.5-8.9-32.4 0L433.7 557.9c-8.9 8.9-8.9 23.5 0 32.4z"  ></path></symbol><symbol id="icon-trash" viewBox="0 0 1024 1024"><path d="M944 192l-188.8 0 0-44.8c0-54.4-44.8-99.2-99.2-99.2l-294.4 0c-54.4 0-99.2 44.8-99.2 99.2l0 44.8-179.2 0c-12.8 0-25.6 9.6-25.6 25.6 0 12.8 9.6 25.6 25.6 25.6l60.8 0 0 0 0 633.6c0 54.4 44.8 99.2 99.2 99.2l550.4 0c54.4 0 99.2-44.8 99.2-99.2l0-630.4 0-3.2 51.2 0c12.8 0 25.6-9.6 25.6-25.6C966.4 204.8 960 192 944 192zM316.8 147.2c0-25.6 22.4-48 48-48l294.4 0c25.6 0 48 22.4 48 48l0 44.8-390.4 0L316.8 147.2zM841.6 867.2c0 28.8-16 57.6-41.6 57.6l-550.4 0c-25.6 0-54.4-19.2-54.4-44.8l3.2-636.8 643.2 0 0 0L841.6 867.2z"  ></path><path d="M368 380.8c-16 0-25.6 9.6-25.6 25.6l0 342.4c0 16 12.8 25.6 25.6 25.6 12.8 0 25.6-9.6 25.6-25.6l0-342.4C390.4 393.6 384 380.8 368 380.8z"  ></path><path d="M528 380.8c-16 0-25.6 9.6-25.6 25.6l0 342.4c0 16 12.8 25.6 25.6 25.6 12.8 0 25.6-9.6 25.6-25.6l0-342.4C550.4 393.6 544 380.8 528 380.8z"  ></path><path d="M688 380.8c-16 0-25.6 9.6-25.6 25.6l0 342.4c0 16 12.8 25.6 25.6 25.6 12.8 0 25.6-9.6 25.6-25.6l0-342.4C710.4 393.6 704 380.8 688 380.8z"  ></path></symbol><symbol id="icon-logout" viewBox="0 0 1024 1024"><path d="M874.666667 855.744a19.093333 19.093333 0 0 1-19.136 18.922667H168.469333A19.2 19.2 0 0 1 149.333333 855.530667V168.469333A19.2 19.2 0 0 1 168.469333 149.333333h687.061334c10.581333 0 19.136 8.533333 19.136 18.922667V320h42.666666V168.256A61.717333 61.717333 0 0 0 855.530667 106.666667H168.469333A61.866667 61.866667 0 0 0 106.666667 168.469333v687.061334A61.866667 61.866667 0 0 0 168.469333 917.333333h687.061334A61.76 61.76 0 0 0 917.333333 855.744V704h-42.666666v151.744zM851.84 533.333333l-131.797333 131.754667a21.141333 21.141333 0 0 0 0.213333 29.973333 21.141333 21.141333 0 0 0 29.973333 0.192l165.589334-165.589333a20.821333 20.821333 0 0 0 6.122666-14.976 21.44 21.44 0 0 0-6.314666-14.997333l-168.533334-168.533334a21.141333 21.141333 0 0 0-29.952-0.213333 21.141333 21.141333 0 0 0 0.213334 29.973333L847.296 490.666667H469.333333v42.666666h382.506667z" fill="#3D3D3D" ></path></symbol><symbol id="icon-notebook" viewBox="0 0 1024 1024"><path d="M981.776141 343.047428h-59.307666V0H42.223859v1024h880.244616V680.952572h59.307666zM662.840308 635.243388a123.300524 123.300524 0 1 1 0-246.486776h147.640665v246.486776zM99.360339 57.13648h109.473497v909.72704H99.360339z m765.971655 909.72704H254.54302V57.13648h610.788974v285.910948H662.840308c-93.132463 0-169.009709 75.762973-169.009709 169.009708s75.877246 168.895436 169.009709 168.895436h202.491686z m70.734963-331.620132h-79.8768V388.756612h79.8768z"  ></path><path d="M660.897668 511.942864m-46.166276 0a46.166276 46.166276 0 1 0 92.332552 0 46.166276 46.166276 0 1 0-92.332552 0Z"  ></path></symbol></svg>',function(t){var e,n=(e=(e=document.getElementsByTagName("script"))[e.length-1]).getAttribute("data-injectcss");if(!(e=e.getAttribute("data-disable-injectsvg"))){var o,r,a,s,i;if(n&&!t.__iconfont__svg__cssinject__){t.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(e){console&&console.log(e)}}o=function(){var e,n=document.createElement("div");n.innerHTML=t._iconfont_svg_string_3696817,(n=n.getElementsByTagName("svg")[0])&&(n.setAttribute("aria-hidden","true"),n.style.position="absolute",n.style.width=0,n.style.height=0,n.style.overflow="hidden",n=n,(e=document.body).firstChild?function(t,e){e.parentNode.insertBefore(t,e)}(n,e.firstChild):e.appendChild(n))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(o,0):(r=function(){document.removeEventListener("DOMContentLoaded",r,!1),o()},document.addEventListener("DOMContentLoaded",r,!1)):document.attachEvent&&(a=o,s=t.document,i=!1,function t(){try{s.documentElement.doScroll("left")}catch(e){return void setTimeout(t,50)}c()}(),s.onreadystatechange=function(){"complete"==s.readyState&&(s.onreadystatechange=null,c())})}function c(){i||(i=!0,a())}}(window)},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.40062b59b0b4cc077ea5.js.map